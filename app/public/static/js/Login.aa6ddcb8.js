(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Login"],{"47b8":function(e,t,s){},"53ab":function(e,t,s){},"61a6":function(e,t,s){"use strict";var n=s("fb6b"),a=s.n(n);a.a},"953e":function(e,t,s){"use strict";var n=s("53ab"),a=s.n(n);a.a},"9bd2":function(e,t,s){"use strict";var n=s("c7e1"),a=s.n(n);a.a},a6fd0:function(e,t,s){"use strict";var n=s("47b8"),a=s.n(n);a.a},c7e1:function(e,t,s){},dd7b:function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"contentBox"},[4!=e.submitType?s("div",{staticClass:"loginbox"},[3!=e.submitType?s("div",{staticClass:"top"},[s("span",{class:1==e.submitType?"active":"",on:{click:function(t){return e.changesubmitType(1)}}},[e._v(" 密码登录 ")]),s("span",{class:2==e.submitType?"active":"",on:{click:function(t){return e.changesubmitType(2)}}},[e._v(" 验证码登录 ")])]):e._e(),s("div",{staticClass:"form-box"},[s("p",{staticClass:"phone"},[s("form-input",{attrs:{type:"text",placeholder:"手机号",value:e.params.phone,clearable:"",icon:""},on:{"update:value":function(t){return e.$set(e.params,"phone",t)}}})],1),2!=e.submitType?s("p",{staticClass:"phone"},[s("form-input",{attrs:{type:"password",placeholder:"密码",value:e.params.password,icon:""},on:{"update:value":function(t){return e.$set(e.params,"password",t)}}})],1):e._e(),3==e.submitType?s("p",[s("form-input",{attrs:{type:"password",placeholder:"确认密码",value:e.params.passwordCheck,icon:""},on:{"update:value":function(t){return e.$set(e.params,"passwordCheck",t)}}})],1):e._e(),1!=e.submitType?s("p",{staticClass:"send-box"},[s("form-input",{staticClass:"send-input",attrs:{type:"text",value:e.params.verifyCode,placeholder:"短信验证码",icon:""},on:{"update:value":function(t){return e.$set(e.params,"verifyCode",t)}}},[s("span",{staticClass:"send-btn",attrs:{disabled:e.canSendVerifyCode},on:{click:e.beforeGetVerifyCode}},[e._v(" "+e._s("发送验证码"==e.disCountNumber?e.disCountNumber:e.disCountNumber+"s之后重新发送")+" ")])])],1):e._e(),3!=e.submitType?s("p",{staticClass:"warning-text"},[s("span",{on:{click:function(t){return e.changesubmitType(3)}}},[e._v(" 注册新用户 ")]),e._v(" "),s("b"),1==e.submitType?s("span",{on:{click:function(t){return e.changesubmitType(4)}}},[e._v("忘记密码?")]):e._e()]):e._e(),3==e.submitType?s("p",{staticClass:"warning-text"},[e._m(0),s("b"),s("span",{},[e._v(" 已有新账号？"),s("a",{on:{click:function(t){return e.changesubmitType(1)}}},[e._v("去登陆")])])]):e._e(),s("p",[s("button",{staticClass:"sure-btn",class:e.disabled?"disabled":"",attrs:{disabled:e.disabled},on:{click:e.loginImmediately}},[e._v(" "+e._s(3==e.submitType?"注册账号":"立即登录")+" ")])])])]):e._e(),4==e.submitType?s("div",{staticClass:"findbox"},[s("h4",[e._v("通过手机找回")]),s("hr"),s("steps",{attrs:{currentSteps:e.currentSteps},on:{changeCurrentSteps:e.changeCurrentSteps}}),s("div",{staticClass:"stepView"},[1==e.currentSteps?s("div",[s("p",[e._v("请输入您的手机号")]),s("p",[s("form-input",{attrs:{placeholder:"",value:e.params.phone},on:{"update:value":function(t){return e.$set(e.params,"phone",t)}}})],1)]):e._e(),2==e.currentSteps?s("div",[s("p",{staticClass:"warning-tip"},[s("span",[e._v("为了验证您的账号安全，需要验证手机的有效性")]),s("span",[e._v("一条包含有效验证码的短信将发送至手机："+e._s(e._f("mobileFilters")(e.params.phone)))])]),s("p",{staticClass:"send-verifycode-box"},[s("form-input",{attrs:{placeholder:"短信验证码",type:"text",value:e.params.verifyCode},on:{"update:value":function(t){return e.$set(e.params,"verifyCode",t)}}}),s("button",{staticClass:"send-verifycode-btn",attrs:{disabled:e.canSendVerifyCode},on:{click:e.beforeGetVerifyCode}},[e._v(" "+e._s("发送验证码"==e.disCountNumber?e.disCountNumber:e.disCountNumber+"s之后重新发送")+" ")])],1)]):e._e(),3==e.currentSteps?s("div",[s("p",[e._v("请重新设置你的账号密码")]),s("p",[s("form-input",{attrs:{type:"password",placeholder:"密码",value:e.params.password,icon:""},on:{"update:value":function(t){return e.$set(e.params,"password",t)}}})],1),s("p",[s("form-input",{attrs:{type:"password",placeholder:"确认密码",value:e.params.passwordCheck,icon:""},on:{"update:value":function(t){return e.$set(e.params,"passwordCheck",t)}}})],1)]):e._e(),s("p",{staticClass:"btn-box"},[3!==e.currentSteps?s("button",{staticClass:"btn next-btn",on:{click:function(t){e.currentSteps+=1}}},[e._v("下一步")]):e._e(),3!==e.currentSteps?s("button",{staticClass:"btn cancel-btn",on:{click:e.cancelFindPassword}},[e._v("取消")]):e._e(),3==e.currentSteps?s("button",{staticClass:"sure-btn",on:{click:e.loginImmediately}},[e._v("确定")]):e._e()])])],1):e._e(),e.showSliderImgValidate&&e.params.smallImage&&e.params.bigImage?s("sliderImgValidate",{attrs:{yHeight:e.params.yHeight,xwidth:e.params.xwidth,bigImage:e.params.bigImage,smallImage:e.params.smallImage,showSliderImgValidate:e.showSliderImgValidate},on:{"update:xwidth":function(t){return e.$set(e.params,"xwidth",t)},"update:showSliderImgValidate":function(t){e.showSliderImgValidate=t},"update:show-slider-img-validate":function(t){e.showSliderImgValidate=t},changeImgPosition:e.changeImgPosition,changeImgPositionEnd:e.changeImgPositionEnd,resetPicAgain:e.getSliderImgValidate}}):e._e()],1)},a=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{},[e._v(" 注册即表示同意"),s("a",[e._v("《全倾用户协议》")])])}];s("d3b7"),s("a4d3"),s("4de4"),s("4160"),s("e439"),s("dbb4"),s("b64b"),s("159b");function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function r(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function o(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?r(Object(s),!0).forEach((function(t){i(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):r(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var c=s("365c"),l=(s("fb6a"),function(e){if(e)return e.slice(0,3)+"****"+e.slice(8)}),u=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"steps-box juzhong"},[s("i",{class:e.currentStepsClass(1)}),s("span",{class:e.currentStepsClass(1),on:{click:function(t){return e.changeCurrentSteps(1)}}},[e._v("1 "),s("b",[e._v("输入手机号码")])]),s("i",{class:e.currentStepsClass(1,2)}),s("span",{class:e.currentStepsClass(2),on:{click:function(t){return e.changeCurrentSteps(2)}}},[e._v("2 "),s("b",[e._v(" 身份验证")])]),s("i",{class:e.currentStepsClass(2,3)}),s("span",{class:e.currentStepsClass(3),on:{click:function(t){return e.changeCurrentSteps(3)}}},[e._v("3 "),s("b",[e._v("设置新密码")])]),s("i",{class:e.currentStepsClass(3)})])},p=[],d={name:"steps",props:["currentSteps"],methods:{currentStepsClass:function(e,t){return this.currentSteps==e||this.currentSteps==t?"active":""},changeCurrentSteps:function(e){this.$emit("changeCurrentSteps",e)}}},m=d,f=(s("9bd2"),s("2877")),h=Object(f["a"])(m,u,p,!1,null,"4e953855",null),b=h.exports,g=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"form-item"},[""===e.icon?s("span",{staticClass:"iconfont position-pre",class:e.iconClass}):e._e(),s("input",{staticClass:"form-input",attrs:{type:e.defaultType?e.defaultType:e.type,placeholder:e.placeholder},domProps:{value:e.value},on:{input:function(t){return e.$emit("update:value",t.target.value)}}}),""===e.clearable?s("span",{directives:[{name:"show",rawName:"v-show",value:e.value,expression:"value"}],staticClass:"iconfont position-end icon-cancel",on:{click:e.clearValue}}):e._e(),""===e.icon&&"password"==e.type?s("span",{staticClass:"iconfont position-end",class:e.defaultType?"icon-eye_protection":"icon-visible",on:{click:function(t){return e.changeDefaultType()}}}):e._e(),s("span",{staticClass:"slot"},[e._t("default")],2)])},v=[],y={props:["type","value","clearable","icon","placeholder","label","offset"],computed:{iconClass:function(){var e={text:"icon-shouji",password:"icon-mima",verifyCode:"icon-dunpai"},t=""===this.$attrs.verifyCode?"verifyCode":this.type;return e[t]}},data:function(){return{defaultType:""}},mounted:function(){this.$props},methods:{changeDefaultType:function(){this.defaultType?this.defaultType="":this.defaultType="text"},clearValue:function(){this.$emit("update:value","")}}},C=y,w=(s("61a6"),Object(f["a"])(C,g,v,!1,null,"1ebad3aa",null)),S=w.exports,_=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"dialogcontainer juzhong"},[s("div",{staticClass:"centerbox"},[s("div",{staticClass:"text"},[e._v(" 请拖动滑块解锁 ")]),s("div",{staticClass:"imgbox"},[s("img",{staticClass:"bigImage",attrs:{src:e.bigImage,alt:"ss"}}),s("img",{staticClass:"smallImage",style:{top:e.yHeight+"px",left:e.xwidth+"px"},attrs:{src:e.smallImage,alt:"ss"}})]),s("div",{staticClass:"drag",on:{mousemove:function(t){return e.mousemove(t)},mousedown:function(t){return e.startPosition(t)}}},[s("div",{staticClass:"btn",style:{left:e.xwidth+"px"},on:{mousedown:function(t){return e.mousedown(t)},mouseup:function(t){return e.mouseup(t)}}},[e._v(" ||| ")])]),s("div",{staticClass:"footer"},[s("span",{staticClass:"iconfont icon-problem fll"}),s("span",{staticClass:"iconfont icon-cancel flr",on:{click:function(t){return e.$emit("update:showSliderImgValidate",!1)}}}),s("span",{staticClass:"iconfont icon-shuaxin flr",on:{click:e.resetPicAgain}})])])])},I=[],x={name:"sliderImgValidate",props:["yHeight","xwidth","bigImage","smallImage","showSliderImgValidate"],data:function(){return{canStartMove:!1,screenX:0}},methods:{startPosition:function(e){},mousedown:function(e){this.canStartMove=!0,this.screenX=e.screenX},mousemove:function(e){var t;this.canStartMove&&(t=e.screenX-this.screenX,t>0&&this.$emit("changeImgPosition",t))},mouseup:function(e){this.canStartMove=!1,this.$emit("changeImgPositionEnd")},resetPicAgain:function(){this.$emit("resetPicAgain")}}},T=x,O=(s("a6fd0"),Object(f["a"])(T,_,I,!1,null,"60782c76",null)),k=O.exports,$={filters:{mobileFilters:l},components:{steps:b,formInput:S,sliderImgValidate:k},beforeCreate:function(){sessionStorage.getItem("submitType",1)},data:function(){var e=this,t=function(t,s,n){""===s?n(new Error("请输入密码")):(""!==e.ruleForm.checkPass&&e.$refs.ruleForm.validateField("checkPass"),n())},s=function(t,s,n){""===s?n(new Error("请再次输入验证码")):s!==e.ruleForm.pass?n(new Error("两次输入的验证码不一致")):n()};return{disCountNumber:"发送验证码",timer:{},submitType:1,currentSteps:1,showSliderImgValidate:!1,needResetSlideBar:!1,params:{phone:"",verifyCode:"",password:"",passwordCheck:"",yHeight:"0",xwidth:"0",bigImage:"",smallImage:""},decorator:{phone:[{validator:t,required:!0,trigger:"change"}],password:[{validator:s,required:!0,trigger:"change"}],verifyCode:[{required:!0,trigger:"change"}]}}},mounted:function(){},computed:{disabled:function(){if(this.params.phone&&11==this.params.phone.length){if(1==this.submitType&&this.params.password)return!1;if(2==this.submitType&&this.params.verifyCode&&6==this.params.verifyCode.length)return!1;if(3==this.submitType&&this.params.password&&this.params.password==this.params.passwordCheck&&this.params.verifyCode&&6==this.params.verifyCode.length)return!1}return!0},canSendVerifyCode:function(){var e=this.params.phone;return 11!=e.length&&!this.timer},biz:function(){var e=this.needResetSlideBar?"0":this.submitType,t={0:"3",1:"3",2:"1",3:"0",4:"2"};return t[e]}},methods:{beforeGetVerifyCode:function(){this.params.phone?(this.showSliderImgValidate=!0,this.getSliderImgValidate()):this.$dialog.alert("请输入手机号")},getSliderImgValidate:function(){var e=this,t={};t.phone=this.params.phone,t.biz=this.biz,Object(c["k"])(t).then((function(t){var s=o(o({},e.params),t.data);e.$set(e,"params",s)}))},changeImgPosition:function(e){this.params.xwidth=e},changeImgPositionEnd:function(){var e=this;this.$nextTick((function(){var t={};t.biz=e.biz,t.phone=e.params.phone,t.xwidth=e.params.xwidth||"0",console.log(t.xwidth),e.showSliderImgValidate=!1,Object(c["a"])(t).then((function(t){"success"==t.msg&&e.$dialog.alert('<span class="iconfont icon-selection" style="font-size:100px;color:green"></span>',{btns:['<span style="color:#000000">验证通过</span>'],callback:[function(){e.params.xwidth=0,1!==e.submitType&&e.getVerifyCode()}]})})).catch((function(t){e.params.xwidth=0,e.getSliderImgValidate()})).finally((function(){var t=e.$options.data().params,s=t.yHeight,n=t.xwidth,a=t.bigImage,i=t.smallImage;e.params=o(o({},e.params),{},{yHeight:s,xwidth:n,bigImage:a,smallImage:i})}))}))},getVerifyCode:function(){var e=this,t=this.biz,s=this.params.phone;Object(c["g"])({phone:s,biz:t}).then((function(t){e.disCount()})).catch((function(t){console.log("%c res 获取验证码错误....","color: red; font-style: italic",JSON.stringify(t,null,2)),e.disCount()}))},disCount:function(){var e=this;this.disCountNumber="60";var t=Math.random;this.timer[t]=setInterval((function(){e.disCountNumber>0?e.disCountNumber--:(e.disCountNumber="发送验证码",e.timer[t]=null)}),1e3)},changesubmitType:function(e){Object.assign(this.$data,this.$options.data()),this.submitType=e},changeCurrentSteps:function(e){this.currentSteps=e},handleSubmit:function(e){e.preventDefault(),this.form.validateFields((function(e,t){e||console.log("Received values of form: ",t)}))},cancelFindPassword:function(){this.currentSteps=1,this.submitType=1},resetAllParams:function(){this.submitType=1,Object.assign(this.$data,this.$options.data())},loginImmediately:function(){var e=this,t=this.params,s=t.password,n=t.verifyCode,a=t.phone,i=t.xwidth;switch(this.submitType){case 1:Object(c["i"])({phone:a,password:s,xwidth:i}).then((function(t){console.log("%c 密码登录....","color: red; font-style: italic",JSON.stringify(t,null,2)),"success"==t.msg?e.getUserInfo():(console.log("%c res....","color: red; font-style: italic",JSON.stringify(t,null,2)),200001===t.code&&(e.needResetSlideBar=!0,e.beforeGetVerifyCode()))}));break;case 2:Object(c["h"])({phone:a,verifyCode:n}).then((function(t){console.log("%c 验证码登录....","color: red; font-style: italic",JSON.stringify(t,null,2)),"success"==t.msg&&e.getUserInfo()}));break;case 3:Object(c["j"])({phoneNumber:a,password:s,verifyCode:n}).then((function(t){"success"==t.msg?(e.submitType=1,e.resetAllParams()):e.$dialog.toast(t.msg||"注册失败，请重试")}));break;case 4:Object(c["b"])({phone:a,password:s,verifyCode:n}).then((function(e){console.log("%c 找回密码....","color: red; font-style: italic",JSON.stringify(e,null,2))})),this.$dialog.alert("密码修改成功",{btns:["返回"],callback:[function(){e.submitType=1,e.resetAllParams()}]});break}},getUserInfo:function(){Object(c["f"])({phone:this.params.phone}).then((function(e){console.log("%c 获取用户信息....","color: red; font-style: italic",JSON.stringify(e,null,2))}))}}},P=$,j=(s("953e"),Object(f["a"])(P,n,a,!1,null,"1ef653c9",null));t["default"]=j.exports},fb6b:function(e,t,s){}}]);